<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Interactive origami folding demo that responds to device posture."
    />
    <meta name="theme-color" content="#201a14" />
    <title>kami: Origami simulator</title>
    <!-- Add Material Symbols Font -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"
    />
    <meta property="og:image" content="https://maxwase.github.io/kami/og.png" />
    <link rel="icon" type="image/png" href="icon.png" />
  </head>

  <body>
    <canvas id="c"></canvas>

    <!-- Action Island (Top Left) -->
    <div id="action-island">
      <div class="action-btn-group">
        <button id="resetActive" type="button" title="Reset">
          <span class="material-symbols-outlined">restart_alt</span>
          <span>Reset</span>
        </button>
        <button id="undo" type="button" disabled title="Undo">
          <span class="material-symbols-outlined">undo</span>
          <span>Undo</span>
        </button>
      </div>

      <div class="action-divider"></div>

      <div class="action-btn-group">
        <button
          id="rotateLeft"
          type="button"
          aria-label="Rotate left"
          title="Rotate left (or Alt+drag up/down)"
        >
          <span class="material-symbols-outlined">rotate_left</span>
          <span>Left</span>
        </button>
        <button
          id="rotateRight"
          type="button"
          aria-label="Rotate right"
          title="Rotate right (or Alt+drag up/down)"
        >
          <span class="material-symbols-outlined">rotate_right</span>
          <span>Right</span>
        </button>
      </div>

      <div class="action-divider"></div>

      <div class="action-btn-group">
        <button id="foldFallback" type="button" title="Fold">
          <span class="material-symbols-outlined">devices_fold</span>
          <span>Fold</span>
        </button>
      </div>
    </div>

    <!-- Settings & Info Buttons (Top Right) -->
    <div id="settings-btn-container">
      <button
        id="toggleStyle"
        type="button"
        aria-controls="stylePanel"
        aria-pressed="false"
        title="Style"
      >
        <span class="material-symbols-outlined">palette</span>
        <span>Style</span>
      </button>
      <button
        id="toggleSettings"
        type="button"
        aria-controls="settingsPanel"
        aria-pressed="false"
        title="Settings"
      >
        <span class="material-symbols-outlined">settings</span>
        <span>Settings</span>
      </button>
      <button
        id="toggleInfo"
        type="button"
        aria-controls="infoPanel"
        aria-pressed="false"
        title="Info"
      >
        <span class="material-symbols-outlined">info</span>
        <span>Info</span>
      </button>
    </div>

    <!-- Style Panel -->
    <div id="stylePanel" class="settings-panel" style="display: none">
      <h3>Style</h3>

      <div class="settings-section">
        <h4>Format</h4>
        <div class="input-group">
          <div class="paper-size-selector">
            <div class="toggle-group">
              <label
                ><input type="radio" name="paperSize" value="a4" checked /> A4</label
              >
              <label
                ><input type="radio" name="paperSize" value="square" /> Square</label
              >
            </div>
          </div>
          <label class="checkbox-label">
            <input type="checkbox" id="showPaperBorder" checked />
            Show paper border
          </label>
        </div>
      </div>

      <div class="settings-section">
        <h4>Color</h4>
        <div class="input-group">
          <div class="input-row">
            <label for="paperColor">Paper Color</label>
            <div class="color-picker-wrapper">
              <input id="paperColor" type="color" value="#ffffff" />
              <div
                class="color-picker-display"
                id="paperColorDisplay"
                style="background-color: #ffffff"
              ></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings Panel -->
    <div id="settingsPanel" class="settings-panel" style="display: none">
      <h3>Settings</h3>

      <div class="settings-section">
        <h4>Motion</h4>
        <div class="input-group">
          <div class="input-row mono">
            <span>Stability:</span>
            <span id="stableAccelValue">0.35 m/sÂ²</span>
            <input
              id="stableAccel"
              type="range"
              class="styled-range"
              min="0"
              max="3"
              step="0.05"
              value="0.35"
            />
          </div>
          <label
            class="checkbox-label"
            title="Reverse which side the fold prefers to move toward when triggered"
          >
            <input id="invertFoldDirection" type="checkbox" />
            Invert fold direction
          </label>
        </div>
      </div>

      <div class="settings-section">
        <h4>Hinge</h4>
        <div class="input-group">
          <div class="input-row mono">
            <span>X:</span>
            <input
              id="manualHingeX"
              type="range"
              class="styled-range"
              min="0"
              max="100"
              step="1"
              value="50"
            />
          </div>
          <div class="input-row mono">
            <span>Y:</span>
            <input
              id="manualHingeY"
              type="range"
              class="styled-range"
              min="0"
              max="100"
              step="1"
              value="50"
            />
          </div>
          <label class="checkbox-label">
            <input id="manualHingeFlip" type="checkbox" />
            Flip hinge line
          </label>
          <div class="mono hinge-status" id="hingeStatus" role="status"></div>
          <button id="resetHinge" type="button" class="reset-hinge-btn">
            <span class="material-symbols-outlined icon-small">restart_alt</span>
            <span>Reset axis</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Info Panel -->
    <div id="infoPanel" class="settings-panel" style="display: none">
      <h3>Info</h3>

      <div class="test-controls-section">
        <div id="foldHelp"></div>
        <div id="gestureHelp"></div>
        <div class="mono" id="status" role="status" aria-live="polite"></div>
      </div>

      <div class="settings-footer">
        <a id="buyCoffee" href="https://www.buymeacoffee.com/maxwase" target="_blank">
          <img
            src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png"
            alt="Buy Me A Coffee"
            style="height: 32px; width: auto"
          />
        </a>
        <a
          id="repoLink"
          href="https://github.com/maxwase/kami"
          target="_blank"
          rel="noreferrer"
          class="footer-link"
        >
          <span class="material-symbols-outlined icon-small">code</span>
          <span>GitHub source</span>
        </a>
      </div>
    </div>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
